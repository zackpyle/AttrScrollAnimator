/*! AttrScrollAnimator by Zack Pyle - v1.1.0 - https://snippetnest.com/snippet/simple-scroll-triggered-animations-with-data-attributes/ */
class AttrScrollAnimator{constructor(e={}){this.options={viewportPosition:.75,...e},this.observedElements=new Set,this.positionObservers=new Map,this.observedThresholds=new Map,this.hasAnimatedIn=new Set,this.debugLines=new Map,this.debugColors=["hsl(160, 100%, 40%)","hsl(220, 100%, 40%)","hsl(280, 100%, 40%)","hsl(330, 100%, 40%)","hsl(0, 100%, 40%)"],this.debouncedRefresh=this.debounce(this.refresh.bind(this),200),window.addEventListener("resize",this.debouncedRefresh),window.addEventListener("load",()=>this.init())}parseThreshold(e){if(!e)return this.options.viewportPosition;if(e.endsWith("px"))return parseInt(e,10)/window.innerHeight;let t=parseFloat(e);return isNaN(t)?this.options.viewportPosition:t}generateColorForThreshold(e){return this.debugColors[e%this.debugColors.length]}debounce(e,t){let s;return(...i)=>{clearTimeout(s),s=setTimeout(()=>e(...i),t)}}createDebugLabel(e,t){let s=document.createElement("div");return s.textContent=e,Object.assign(s.style,{position:"absolute",left:"0",top:"-1.2em",fontSize:"12px",background:"white",color:t,padding:"2px 6px",border:`1px solid ${t}`,borderRadius:"3px"}),s}createLine(e,t,s,i=!1){let r=document.createElement("div");return r.className="scroll-animation-debug-line",Object.assign(r.style,{position:i?"fixed":"absolute",top:`${t}px`,left:"0",width:"100%",height:"0",borderTop:`2px dashed ${s}`,zIndex:"9999",pointerEvents:"none"}),r.appendChild(this.createDebugLabel(e,s)),document.body.appendChild(r),r}createPositionObserver(e){if(!this.positionObservers.has(e)){let t=window.innerHeight,s=t*e,i=`${-s}px 0px ${-(t-s-1)}px 0px`,r=new IntersectionObserver(this.handleIntersection.bind(this),{root:null,rootMargin:i,threshold:0});this.positionObservers.set(e,r)}return this.positionObservers.get(e)}handleIntersection(e){e.forEach(e=>{let t=e.target,s=t.getAttribute("data-scroll-animation-class"),i=t.getAttribute("data-scroll-animation-reverse"),r=this.observedThresholds.get(t)??this.options.viewportPosition;if(!s)return;let o=window.innerHeight*r,n=e.boundingClientRect.top,l=i&&"true"!==i?i:null;n<=o?(t.classList.add(s),l&&t.classList.remove(l),this.hasAnimatedIn.add(t)):i&&this.hasAnimatedIn.has(t)&&(t.classList.remove(s),l&&t.classList.add(l))})}init(){let e=document.querySelectorAll("[data-scroll-animation-class]");e.forEach((e,t)=>{let s=e.getAttribute("data-scroll-animation-class");if(!s||e.classList.contains(s))return;let i=e.getAttribute("data-scroll-animation-threshold"),r=this.parseThreshold(i),o=this.createPositionObserver(r);if(o.observe(e),this.observedElements.add(e),this.observedThresholds.set(e,r),"true"===e.getAttribute("data-scroll-debug")){let n=this.generateColorForThreshold(t),l=()=>{let t=this.createLine(`Threshold (${r})`,window.innerHeight*r,n,!0),s=document.createElement("div");s.className="scroll-animation-trigger-line",Object.assign(s.style,{position:"absolute",top:"0",left:"0",width:"100%",height:"0",borderTop:`2px dashed ${n}`,pointerEvents:"none",zIndex:"9999"}),s.appendChild(this.createDebugLabel(`Trigger - (Threshold ${r})`,n)),"static"===getComputedStyle(e).position&&(e.style.position="relative"),e.appendChild(s),this.debugLines.set(e,[s,t])},a=0,h=()=>{a<5?(a++,requestAnimationFrame(h)):l()};h()}})}refresh(){this.destroy(),this.init()}destroy(){window.removeEventListener("resize",this.debouncedRefresh),this.positionObservers.forEach(e=>e.disconnect()),this.positionObservers.clear(),this.observedElements.clear(),this.observedThresholds.clear(),this.hasAnimatedIn.clear(),this.debugLines.forEach(e=>e.forEach(e=>e.remove())),this.debugLines.clear()}}const attrScrollAnimation=new AttrScrollAnimator;window.attrScrollAnimation=attrScrollAnimation;